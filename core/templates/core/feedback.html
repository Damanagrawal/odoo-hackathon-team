{% extends 'core/base.html' %}

{% block title %}Submit Feedback - Skill Swap Platform{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-8">
        <div class="card shadow">
            <div class="card-header bg-warning text-dark">
                <h4 class="mb-0">
                    <i class="fas fa-star me-2"></i>Share Your Experience
                </h4>
                <p class="mb-0 mt-2 opacity-75">Help build trust in our community by sharing feedback</p>
            </div>
            <div class="card-body">
                <form method="post">
                    {% csrf_token %}
                    
                    <div class="mb-4">
                        <label for="{{ form.swap.id_for_label }}" class="form-label">
                            <i class="fas fa-exchange-alt me-1"></i>Select Skill Swap
                        </label>
                        {{ form.swap }}
                        {% if form.swap.errors %}
                            <div class="text-danger small mt-1">
                                {% for error in form.swap.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}
                        <small class="form-text text-muted">Choose the completed skill swap you want to review</small>
                    </div>

                    <div class="mb-4">
                        <label for="{{ form.rating.id_for_label }}" class="form-label">
                            <i class="fas fa-star me-1"></i>Rating
                        </label>
                        <div class="rating-input-container">
                            {{ form.rating }}
                            <div class="rating-stars mt-2">
                                <span class="rating-hint text-muted">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    Rate from 1 to 5 stars
                                </span>
                            </div>
                        </div>
                        {% if form.rating.errors %}
                            <div class="text-danger small mt-1">
                                {% for error in form.rating.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}
                        <small class="form-text text-muted">How would you rate this skill exchange experience?</small>
                    </div>

                    <div class="mb-4">
                        <label for="{{ form.comment.id_for_label }}" class="form-label">
                            <i class="fas fa-comment-dots me-1"></i>Your Review
                        </label>
                        {{ form.comment }}
                        {% if form.comment.errors %}
                            <div class="text-danger small mt-1">
                                {% for error in form.comment.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}
                        <small class="form-text text-muted">Share details about your experience, what you learned, and how helpful your partner was</small>
                    </div>

                    {% if form.non_field_errors %}
                        <div class="alert alert-danger">
                            {% for error in form.non_field_errors %}
                                {{ error }}
                            {% endfor %}
                        </div>
                    {% endif %}

                    <div class="bg-light p-3 rounded mb-4">
                        <h6 class="text-warning mb-2">
                            <i class="fas fa-lightbulb me-1"></i>Feedback Guidelines
                        </h6>
                        <ul class="mb-0 small">
                            <li><strong>Be Honest:</strong> Share your genuine experience</li>
                            <li><strong>Be Constructive:</strong> Provide helpful feedback for improvement</li>
                            <li><strong>Be Respectful:</strong> Keep your review professional and kind</li>
                            <li><strong>Be Specific:</strong> Mention what you learned and how it helped you</li>
                        </ul>
                    </div>

                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                        <a href="{% url 'index' %}" class="btn btn-outline-secondary me-md-2">
                            <i class="fas fa-arrow-left me-2"></i>Cancel
                        </a>
                        <button type="submit" class="btn btn-warning btn-lg text-dark">
                            <i class="fas fa-paper-plane me-2"></i>Submit Feedback
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Feedback Benefits Section -->
        <div class="card mt-4">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0">
                    <i class="fas fa-heart me-2"></i>Why Feedback Matters
                </h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4 text-center mb-3">
                        <i class="fas fa-shield-alt fa-3x text-success mb-2"></i>
                        <h6>Build Trust</h6>
                        <p class="small text-muted">Help others make informed decisions about skill exchanges</p>
                    </div>
                    <div class="col-md-4 text-center mb-3">
                        <i class="fas fa-arrow-up fa-3x text-primary mb-2"></i>
                        <h6>Improve Quality</h6>
                        <p class="small text-muted">Constructive feedback helps everyone become better teachers</p>
                    </div>
                    <div class="col-md-4 text-center mb-3">
                        <i class="fas fa-users fa-3x text-warning mb-2"></i>
                        <h6>Strengthen Community</h6>
                        <p class="small text-muted">Recognition and feedback build a supportive learning environment</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recent Feedback Section -->
        <div class="card mt-4">
            <div class="card-header bg-info text-white">
                <h5 class="mb-0">
                    <i class="fas fa-comments me-2"></i>Recent Community Feedback
                </h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <div class="card border-0 bg-light">
                            <div class="card-body p-3">
                                <div class="d-flex align-items-center mb-2">
                                    <div class="rating-stars me-2">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                    </div>
                                    <small class="text-muted">2 days ago</small>
                                </div>
                                <p class="small mb-1">"Excellent Python tutorial! Very patient teacher."</p>
                                <small class="text-muted">- Anonymous User</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <div class="card border-0 bg-light">
                            <div class="card-body p-3">
                                <div class="d-flex align-items-center mb-2">
                                    <div class="rating-stars me-2">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="far fa-star"></i>
                                    </div>
                                    <small class="text-muted">1 week ago</small>
                                </div>
                                <p class="small mb-1">"Great design tips! Learned a lot about UI/UX."</p>
                                <small class="text-muted">- Anonymous User</small>
                            </div>
                        </div>
                    </div>
                </div>
                <p class="text-muted text-center mt-3">
                    <i class="fas fa-info-circle me-1"></i>
                    Your feedback helps create a thriving learning community
                </p>
            </div>
        </div>
    </div>
</div>

<style>
.rating-input-container input[type="number"] {
    width: 80px;
    display: inline-block;
}

.rating-stars {
    color: #ffc107;
}

.rating-hint {
    font-size: 0.9rem;
}

.rating-hint .fas,
.rating-hint .far {
    margin-right: 2px;
}
</style>

<script>
// Add interactive rating display
document.addEventListener('DOMContentLoaded', function() {
    const ratingInput = document.querySelector('input[type="number"][id*="rating"]');
    if (ratingInput) {
        ratingInput.addEventListener('input', function() {
            const value = parseInt(this.value);
            const stars = document.querySelectorAll('.rating-hint .fa-star');
            
            stars.forEach((star, index) => {
                if (index < value) {
                    star.classList.remove('far');
                    star.classList.add('fas');
                } else {
                    star.classList.remove('fas');
                    star.classList.add('far');
                }
            });
        });
    }
});
</script>
{% endblock %}
